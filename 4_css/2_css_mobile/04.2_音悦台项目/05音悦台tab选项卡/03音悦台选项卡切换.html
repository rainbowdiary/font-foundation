<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,viewport-fit:cover">
    <title>音悦台</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div id="app">
        <!--头部-->
        <header id="header">
            <div class="header-top">
                <div class="logo">
                    <a href="javascript:">
                        <img src="img/logo.png" alt="logo">
                    </a>
                </div>
                <div class="menu-btn"></div>
                <div class="btns">
                    <button class="btn btn-search">搜索</button>
                    <button class="btn">登录</button>
                    <button class="btn">注册</button>
                </div>
            </div>
            <div class="header-bottom">
                <form action="test.php">
                    <input type="text" class="search-input" placeholder="请输入搜索内容...">
                    <button class="search-btn">搜索</button>
                </form>
            </div>
            <div class="menu-list">
                <ul>
                    <li><a href="javascript:">首页</a></li>
                    <li><a href="javascript:">MV</a></li>
                    <li><a href="javascript:">TV</a></li>
                    <li><a href="javascript:">电台</a></li>
                    <li><a href="javascript:">怀旧</a></li>
                    <li><a href="javascript:">经典</a></li>
                    <li><a href="javascript:">流行</a></li>
                    <li><a href="javascript:">影视</a></li>
                    <li><a href="javascript:">摇滚</a></li>
                    <li><a href="javascript:">Rap</a></li>
                    <li><a href="javascript:">喊麦</a></li>
                    <li><a href="javascript:">篮球</a></li>
                </ul>
            </div>
        </header>

        <div id="main">
            <!--导航-->
            <nav id="nav">
                <ul>
                    <li class="active">
                        <a href="javascript:">首页</a>
                    </li>
                    <li>
                        <a href="javascript:">MV</a>
                    </li>
                    <li>
                        <a href="javascript:">悦单</a>
                    </li>
                    <li>
                        <a href="javascript:">V榜</a>
                    </li>
                    <li>
                        <a href="javascript:">音悦</a>
                    </li>
                    <li>
                        <a href="javascript:">商城</a>
                    </li>
                    <li>
                        <a href="javascript:">节目</a>
                    </li>
                    <li>
                        <a href="javascript:">饭团</a>
                    </li>
                    <li>
                        <a href="javascript:">资讯</a>
                    </li>
                    <li>
                        <a href="javascript:">我的家</a>
                    </li>
                    <li>
                        <a href="javascript:">APP下载</a>
                    </li>
                    <li>
                        <a href="javascript:">热门应用</a>
                    </li>
                </ul>
            </nav>
            <!--轮播图-->
            <div id="swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-item"><img src="img/1.jpg" alt="老刘"></div>
                    <div class="swiper-item"><img src="img/2.jpg" alt="老刘"></div>
                    <div class="swiper-item"><img src="img/3.jpg" alt="老刘"></div>
                    <div class="swiper-item"><img src="img/4.jpg" alt="老刘"></div>
                    <div class="swiper-item"><img src="img/5.jpg" alt="老刘"></div>
                </div>
                <div class="paganation"></div>
            </div>
            <!--选项卡-->
            <div class="tab">
                <header class="tab-header">
                    <h2>MV首播</h2>
                    <a href="javascript:" class="tab-more">更多&gt;</a>
                </header>
                <nav class="tab-nav">
                    <a href="javascript:">全部</a>
                    <a href="javascript:">大陆</a>
                    <a href="javascript:">港台</a>
                    <a href="javascript:">欧美</a>
                    <a href="javascript:">日韩</a>
                    <a href="javascript:">泰国</a>
                </nav>
                <div class="tab-content">
                    <div class="tab-loading"></div>
                    <ul class="content-list">
                        <li class="content-item">
                            <a href="javascript:">
                                <img src="img/a.jpg" alt="老刘">
                                <h3>乡村爱情8</h3>
                            </a>
                            <div class="content-des">
                                <div class="played-count">
                                    <span class="icon"></span>
                                    <span class="numbers">2342</span>
                                </div>
                                <div class="comment-count">
                                    <span class="icon"></span>
                                    <span class="numbers">1342</span>
                                </div>
                            </div>
                        </li>
                        <li class="content-item">
                            <a href="javascript:">
                                <img src="img/b.jpg" alt="老刘">
                                <h3>乡村爱情之老刘和尼古拉斯的美丽故事</h3>
                            </a>
                            <div class="content-des">
                                <div class="played-count">
                                    <span class="icon"></span>
                                    <span class="numbers">2342</span>
                                </div>
                                <div class="comment-count">
                                    <span class="icon"></span>
                                    <span class="numbers">1342</span>
                                </div>
                            </div>
                        </li>
                        <li class="content-item">
                            <a href="javascript:">
                                <img src="img/a.jpg" alt="老刘">
                                <h3>乡村爱情8</h3>
                            </a>
                            <div class="content-des">
                                <div class="played-count">
                                    <span class="icon"></span>
                                    <span class="numbers">2342</span>
                                </div>
                                <div class="comment-count">
                                    <span class="icon"></span>
                                    <span class="numbers">1342</span>
                                </div>
                            </div>
                        </li>
                        <li class="content-item">
                            <a href="javascript:">
                                <img src="img/a.jpg" alt="老刘">
                                <h3>乡村爱情8</h3>
                            </a>
                            <div class="content-des">
                                <div class="played-count">
                                    <span class="icon"></span>
                                    <span class="numbers">2342</span>
                                </div>
                                <div class="comment-count">
                                    <span class="icon"></span>
                                    <span class="numbers">1342</span>
                                </div>
                            </div>
                        </li>
                        <li class="content-item">
                            <a href="javascript:">
                                <img src="img/a.jpg" alt="老刘">
                                <h3>乡村爱情8</h3>
                            </a>
                            <div class="content-des">
                                <div class="played-count">
                                    <span class="icon"></span>
                                    <span class="numbers">2342</span>
                                </div>
                                <div class="comment-count">
                                    <span class="icon"></span>
                                    <span class="numbers">1342</span>
                                </div>
                            </div>
                        </li>
                        <li class="content-item">
                            <a href="javascript:">
                                <img src="img/a.jpg" alt="老刘">
                                <h3>乡村爱情8</h3>
                            </a>
                            <div class="content-des">
                                <div class="played-count">
                                    <span class="icon"></span>
                                    <span class="numbers">2342</span>
                                </div>
                                <div class="comment-count">
                                    <span class="icon"></span>
                                    <span class="numbers">1342</span>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <div class="tab-loading"></div>
                </div>
            </div>

        </div>




    </div>

    <script src="js/transformcss.js"></script>
    <script src="js/swiper.js"></script>
    <script src="js/index.js"></script>
    <script>
        //选项卡
        (function () {
            // 获取元素
            var tab = document.querySelector('.tab');
            var tabContent = tab.querySelector('.tab-content');
            var contentList = tab.querySelector('.content-list');

            // 获取tab-loading和content-list的宽度
            var itemWidth = contentList.offsetWidth;
            // 设置一下tabContent的初始位置
            transformCss(tabContent, 'translateX', -itemWidth)



            // 触摸开始
            contentList.addEventListener('touchstart', function (event) {
                //获取触点对象
                var touch = event.changedTouches[0];
                // 获取触点的初始位置
                this.startX = touch.clientX;
                //获取元素的初始位置
                this.eleX = transformCss(tabContent, 'translateX');
                // 手指一动距离 初始化
                this.dstX = 0;
                // 关闭过渡
                tabContent.style.transition = 'none';
            });
            // 触摸移动
            contentList.addEventListener('touchmove', function (event) {
                //获取触点对象
                var touch = event.changedTouches[0];
                // 获取结束位置
                var endX = touch.clientX;
                // 计算手指滑动的距离
                this.dstX = endX - this.startX;
                // 计算新的位置
                var translateX = this.eleX + this.dstX;
                // 如果滑动距离超过tab宽度一半，执行切换
                if (Math.abs(this.dstX) > tab.clientWidth/2) {
                    // 如果从左向右 上一个 显示左边的loading
                    if (this.dstX > 0) {
                        translateX = 0;
                    } else if (this.dstX < 0) { //从右向左， 下一个  显示右边的loading
                        translateX = -2*itemWidth;
                    }

                    // 添加过渡
                    tabContent.style.transition = 'transform .5s';
                }


                // 设置位置
                transformCss(tabContent, 'translateX', translateX);
            });
            // 触摸结束
            contentList.addEventListener('touchend', function (event) {
                // 判断滑动距离没有超过一半
                if (Math.abs(this.dstX) <= tab.clientWidth/2) {
                    //添加过渡
                    tabContent.style.transition = 'transform .5s';
                    // 回到内容区域
                    transformCss(tabContent, 'translateX', -itemWidth);
                }
            });
            // 过渡结束 开始加载数据
            tabContent.addEventListener('transitionend', function () {
                // 获取tabContent的位置
                var translateX = transformCss(tabContent, 'translateX');
                // 如果translateX位置是 中间内容区域的位置。不加载新的数据
                if (translateX === -itemWidth) {
                    return;
                }

                // 加载新的数据 //实际中应该从后端获取数据
                setTimeout(function () {
                    // 取消过渡
                    tabContent.style.transition = 'none';
                    // 快速变换位置
                    transformCss(tabContent, 'translateX', -itemWidth);
                }, 2000);

            });

        })();
    </script>
</body>
</html>
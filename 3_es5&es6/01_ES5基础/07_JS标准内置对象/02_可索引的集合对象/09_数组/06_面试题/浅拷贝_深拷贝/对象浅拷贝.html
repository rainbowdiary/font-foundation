<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    /* 浅拷贝和深拷贝是只针对Object和Array这样的引用数据类型
       浅拷贝: 只复制了指向对象的指针，而不复制对象本身，新旧对象共享一块内存
       深拷贝: 创建一样的对象，新旧对象不共享内存，修改新对象不会改到原对象
    */


    /* 对象赋值  (原对象的基本数据类型和引用数据类型都改了)*/
    console.log('-----赋值-----');
    var obj1 = {
      'name': 'zhangsan',
      'age': '18',
      'language': [1, [2, 3], [4, 5]]
    }

    var obj2 = obj1
    obj2.name = 'lisi'
    obj2.language[1] = ['二', '三']
    /* obj1也发生了改变 */
    console.log('obj1', obj1);
    console.log('obj2', obj2);


    /* 浅拷贝对象 (原对象的基本数据类型没改，引用数据类型改了)*/
    console.log('-----浅拷贝1 forin----');
    var obj3 = {
      'name': 'zhangsan',
      'age': '18',
      'language': [1, [2, 3], [4, 5]]
    }
    var obj4 = shallowCopy(obj3);
    obj4.name = 'lisi';
    obj4.language[1] = ['二', '三']
    console.log('obj3', obj3);
    console.log('obj4', obj4);
    function shallowCopy(src) {
      var dst = {};
      for (var key in src) {
        if (src.hasOwnProperty(key)) {
          dst[key] = src[key];
        }
      }
      return dst
    }

    console.log('-----浅拷贝2 assign-----');
    var obj5 = Object.assign({}, obj3)
    obj5.name = 'wangwu';
    obj5.language[1] = ['四', '五']  //原对象引用数据类型改变了
    console.log('obj5 assign', obj3, obj5);

  </script>
</body>

</html>
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title></title>
</head>

<body>
</body>
<script type="text/javascript">

  for (var i = 0; i < 5; i++) {
    setTimeout(function () {
      console.log(i);
    }, 1000)
  }
		//一秒钟之后同时输出5个5

    // for循环，先判断后++

  /*
  原因: 结合定时器在js中工作流程
  每次遇到定时器都会同步执行，
  所以有5个异步线程，1s后依次放入异步队列，此时i已经走完，为5；
  所以V8有空执行异步队列中的任务，同时输出5个5
   */



   /* 
   
   # 定时器在js中如何工作?
```
setTimeout(()=>{
      console.log(2);
    },2000)
    console.log(1);
```
1. 浏览器解析html，遇到script标签
2. V8引擎来执行JS代码
3. V8解析代码的时候遇到定时器
4. 定时器是同步的: 调用setTimeout()
5. 发现第一个参数是函数；不能执行，注册；
  - 回调函数只能V8执行，但是发现函数要注册；
6. V8告诉chrome在线程池里唤醒一个线程去抢时间片来计时；

		* 谁来计时？ 
  			- V8不能计时，V8告诉chrome来计时，chrome在线程池里唤醒一个休眠的线程，去抢时间片来计时；
  			- （所以回调被执行的时间大于2s，定时器是不准的，因为去线程池里唤醒线程，到线程去抢时间片来计时，时间肯定是大于2s的）          
		
7. 异步线程持有着回调函数
8. V8继续执行下面的代码
9. 2s计时到了之后
10. 异步线程持有着回调函数，内存中有队列，2s计时到了后，异步线程会自动把回调塞到队列中，塞完后继续去休眠，
11. 等V8有空会轮询队列，才会来执行



- CPU执行指令，CPU里面的时间片
- V8永远不会休息。
- 进程 线程:
    * 每隔软件都是一个进程
    * 每个进程都有很多线程
   
    */
</script>

</html>